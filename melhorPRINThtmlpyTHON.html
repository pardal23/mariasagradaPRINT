<!DOCTYPE html>
<html lang="pt">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Python Fake Executor</title>

<style>
body {
    font-family: Arial, sans-serif;
    background: #fafafa;
}

.python-output {
    background: #f0f0f0;
    padding: 8px;
    margin: 8px 0;
    border-left: 4px solid #1e90ff;
    font-family: monospace;
    white-space: pre-wrap;
    color: #1e90ff; /* AZUL */
}

h1 { text-align:center; color:#8B008B; }
h3 { text-align:center; color:#00008B; }
h4 { text-align:center; color:red; }

div[id^="conteudo"] {
    padding: 15px;
    margin: auto;
    max-width: 600px;
}
</style>
</head>

<body>

<h1>Jogar há poesia.</h1>

<div id="conteudo">
<h3>Poesia da infância</h3>
</div>

<div id="conteudo1">
<python>
print("Como foi a tua infância?<br>")
print("Simples e feliz<br>")
ano = 1989
idade = 2025 - ano
print("Idade:")
print(idade)
print("anos")
</python>
</div>

<div id="conteudo2">
<python>
print("Outro bloco Python<br>")
x = 10
y = 5
print(x)
print(y)
</python>
</div>

<div id="conteudo3">
<python>
print("A Maria tem ")
b = (23 * 2)
print(b)
print("anos")
</python>
</div>

<div id="conteudo4">
<python>
print("vamos criar amor ")
print("vamos ser felizes")
a = (23 * 2 *45)
print(a)
print("anos")
</python>
</div>

<script>
function executarPythonFake(html) {

    return html.replace(/<python>([\s\S]*?)<\/python>/g, function (_, codigo) {

        const linhas = codigo.split(/\r?\n/);
        const vars = {};
        let saida = "";

        for (let linha of linhas) {
            linha = linha.trim();
            if (linha === "") continue;

            // ATRIBUIÇÃO: nome = expressão matemática
            if (/^[a-zA-Z_]\w*\s*=/.test(linha)) {
                let partes = linha.split("=");
                let nome = partes.shift().trim();
                let expr = partes.join("=").trim();

                // substituir variáveis conhecidas
                expr = expr.replace(/[a-zA-Z_]\w*/g, v => {
                    if (vars.hasOwnProperty(v)) return vars[v];
                    return v;
                });

                // validar expressão (números, operadores e parênteses)
                if (!/^[0-9+\-*/().\s]+$/.test(expr)) {
                    return `<div class="python-output">[ERRO NA EXPRESSÃO]</div>`;
                }

                try {
                    vars[nome] = Function("return (" + expr + ")")();
                } catch {
                    return `<div class="python-output">[ERRO AO CALCULAR]</div>`;
                }

                continue;
            }

            // PRINT
            if (/^print\s*\(.+\)$/.test(linha)) {
                let conteudo = linha.replace(/^print\s*\(|\)$/g, "").trim();

                // string literal
                if (
                    (conteudo.startsWith('"') && conteudo.endsWith('"')) ||
                    (conteudo.startsWith("'") && conteudo.endsWith("'"))
                ) {
                    saida += conteudo.slice(1, -1);
                }
                // variável
                else if (vars.hasOwnProperty(conteudo)) {
                    saida += vars[conteudo];
                }
                else {
                    return `<div class="python-output">[ERRO NO PRINT]</div>`;
                }

                saida += "\n";
                continue;
            }

            return `<div class="python-output">[COMANDO NÃO SUPORTADO]</div>`;
        }

        return `<div class="python-output">${saida}</div>`;
    });
}

window.addEventListener("load", () => {
    document.querySelectorAll("div[id^='conteudo']").forEach(div => {
        div.innerHTML = executarPythonFake(div.innerHTML);
    });
});
</script>

</body>
</html>